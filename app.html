<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jualanku | App</title>
  <style>
    :root{ --bg:#f5f6f8; --card:#ffffff; --muted:#6b7280; --accent:#111827 }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:#111827; line-height:1.4; position:relative }
    body::before{ content:""; position:fixed; inset:0; background-image:url('logo.jpeg'); background-repeat:no-repeat; background-position:center; background-size:360px auto; opacity:0.14; pointer-events:none; z-index:-1 }
    header{background:#fff;border-bottom:1px solid #eef2f7;position:sticky;top:0;z-index:10}
    .header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 18px;max-width:1200px;margin:0 auto}
    .brand{display:flex;align-items:center;gap:12px}
    .mini{width:46px;height:46px;border-radius:8px;background:transparent;overflow:hidden}
    .search input{width:360px;padding:10px;border-radius:8px;border:1px solid #e6e7eb}
    nav .cats button{border-radius:8px;padding:8px 10px;border:none;margin:0 6px;cursor:pointer}
    nav .cats .active{background:var(--accent);color:#fff}
    main{max-width:1200px;margin:18px auto;display:grid;grid-template-columns:3fr 1.3fr;gap:22px;padding:0 18px 48px 18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 8px 24px rgba(2,6,23,0.04)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .product{display:flex;flex-direction:column;gap:8px;padding:12px;border:1px solid #f0f1f4;border-radius:10px}
    .product .img{height:120px;background:#f3f4f6;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#6b7280}
    .aside{position:sticky;top:76px;display:flex;flex-direction:column;gap:14px}
    footer{max-width:1200px;margin:0 auto;padding:18px;text-align:center;color:var(--muted);font-size:13px}
    body::before{ opacity:0.08; background-size:420px auto }
    @media (max-width:1024px){ .search input{width:220px} main{grid-template-columns:1fr; gap:16px; padding:0 14px 40px} .header-inner{padding:10px} }
    /* Centered content row inside main */
    .content-row{display:flex;gap:22px;align-items:flex-start;justify-content:center}
    .content-left{flex:0 1 780px}
    .content-right{flex:0 0 380px}
    @media (max-width:1024px){
      .content-row{flex-direction:column}
      .content-left,.content-right{flex:1 1 auto}
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div style="display:flex;align-items:center">
        <div class="brand">
          <div class="mini"><img src="logo.jpeg" alt="Jualanku" style="width:100%;height:100%;object-fit:contain" /></div>
          <div style="display:flex;flex-direction:column;">
            <div style="font-weight:800">Jualanku</div>
            <div style="font-size:13px;color:#6b7280">e-commerce</div>
          </div>
        </div>
        <div class="search" style="margin-left:12px">
          <input id="searchInput" placeholder="Cari produk, misal: tas, headphone..." />
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:12px">
        <nav class="cats">
          <button data-cat="All" class="active">Semua</button>
          <button data-cat="Fashion">Fashion</button>
          <button data-cat="Elektronik">Elektronik</button>
          <button data-cat="Aksesoris">Aksesoris</button>
        </nav>
        <div class="user-box">
          <div style="font-size:13px;color:#6b7280" id="userNameEmail">Halo, User</div>
          <button id="logoutBtn" class="btn-ghost" style="background:transparent;border:1px solid #e6e7eb;color:#6b7280;border-radius:8px;padding:8px 10px">Keluar</button>
          <button id="cartBtn" class="btn-ghost" style="background:transparent;border:1px solid #e6e7eb;color:#6b7280;border-radius:8px;padding:8px 10px">Keranjang (<span id="cartCount">0</span>)</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="container" style="padding:0">
      <div class="content-row">
        <div class="content-left">
          <div class="card banner">
            <div class="left">
              <h2>Promo Spesial Minggu Ini!</h2>
              <p style="font-size:13px;color:#6b7280">Diskon hingga 50% untuk produk pilihan. Hanya berlaku terbatas.</p>
              <div style="margin-top:10px"><button id="promoBtn" style="padding:10px 14px;border:none;border-radius:8px;background:#111827;color:#fff">Lihat Promo</button></div>
            </div>
            <div style="width:160px;height:100px;background:#fff;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#6b7280">Ilustrasi Promo</div>
          </div>
          <div style="height:12px"></div>
          <div class="card">
            <h3 style="margin:0 0 10px 0">Rekomendasi Untukmu</h3>
            <div id="recGrid" class="grid"></div>
          </div>
          <div style="height:12px"></div>
          <div class="card">
            <h3 style="margin:0 0 10px 0">Daftar Produk</h3>
            <div id="prodGrid" class="grid"></div>
          </div>
        </div>
        <aside class="content-right">
          <div class="aside">
            <div class="card">
              <h4 style="margin:0 0 8px 0">Ringkasan Keranjang</h4>
              <div id="cartWrap">
                <div style="font-size:13px;color:#6b7280" id="cartEmpty">Keranjang kosong.</div>
                <div id="cartList" style="display:none"></div>
                <div id="cartTotalWrap" style="display:none;margin-top:10px;border-top:1px dashed #eef2f7;padding-top:10px;display:flex;justify-content:space-between;align-items:center">
                  <div style="font-size:13px;color:#6b7280">Total</div>
                  <div style="font-weight:700" id="cartTotal">Rp 0</div>
                </div>
                <div style="margin-top:8px"><button id="checkoutBtn" style="width:100%;padding:10px 14px;border:none;border-radius:8px;background:#111827;color:#fff">Checkout</button></div>
              </div>
            </div>
            <div class="card">
              <h4 style="margin:0 0 8px 0">Kategori</h4>
              <div style="display:flex;flex-direction:column;gap:8px">
                <button class="catBtn" data-cat="All">Semua</button>
                <button class="catBtn" data-cat="Fashion">Fashion</button>
                <button class="catBtn" data-cat="Elektronik">Elektronik</button>
                <button class="catBtn" data-cat="Aksesoris">Aksesoris</button>
              </div>
            </div>
            <div class="card">
              <h4 style="margin:0 0 8px 0">Akun</h4>
              <div style="font-size:13px;color:#6b7280" id="accInfo"></div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <footer>© <span id="year"></span> Jualanku.com - Demo UI</footer>

  <script>
    const PRODUCTS = [
      { id: 1, name: "Sneakers Merah", price: 450000, category: "Fashion", recommended: true },
      { id: 2, name: "Headphone Wireless", price: 350000, category: "Elektronik", recommended: true },
      { id: 3, name: "Jam Tangan Metal", price: 250000, category: "Aksesoris", recommended: false },
      { id: 4, name: "Tas Ransel", price: 150000, category: "Fashion", recommended: true },
      { id: 5, name: "Powerbank 10.000mAh", price: 120000, category: "Elektronik", recommended: false },
      { id: 6, name: "Kemeja Katun", price: 90000, category: "Fashion", recommended: false }
    ];

    const el = id => document.getElementById(id);
    const money = n => 'Rp ' + n.toLocaleString('id-ID');

    let STATE = { user: null, cart: JSON.parse(localStorage.getItem('jualanku_cart') || '[]'), query: '', category: 'All' };

    document.addEventListener('DOMContentLoaded', () => {
      const logged = JSON.parse(localStorage.getItem('jualanku_user') || 'null');
      if(!logged){ window.location.href = 'login.html'; return; }
      showApp(logged);
    });

    function showApp(user){
      STATE.user = user;
      el('year').innerText = new Date().getFullYear();
      renderHeaderUser();
      renderAll();
      setupInteractions();
    }
    function renderHeaderUser(){ el('userNameEmail').innerText = `Halo, ${STATE.user.name}`; el('accInfo').innerText = `Nama: ${STATE.user.name}\nEmail: ${STATE.user.email}`; updateCartCount(); }
    function formatPrice(n){ return money(n); }
    function renderAll(){ renderRecommendations(); renderProducts(); renderCart(); }
    function renderRecommendations(){
      const recWrap = el('recGrid'); recWrap.innerHTML = '';
      PRODUCTS.filter(p => p.recommended).forEach(p => {
        const card = document.createElement('div'); card.className = 'product';
        card.innerHTML = `<div class="img">Gambar</div><div class="title">${p.name}</div><div class="meta">${p.category}</div><div class="row" style="display:flex;justify-content:space-between;align-items:center;margin-top:6px"><div style="font-weight:700">${formatPrice(p.price)}</div><button class="addBtn" data-id="${p.id}" style="padding:8px 12px;border:none;border-radius:8px;background:#111827;color:#fff">Tambah</button></div>`;
        recWrap.appendChild(card);
      });
      recWrap.querySelectorAll('.addBtn').forEach(b => { b.addEventListener('click', ()=> addToCartById(+b.dataset.id)); });
    }
    function renderProducts(){
      const grid = el('prodGrid'); grid.innerHTML = '';
      const qv = STATE.query.trim().toLowerCase(); const cat = STATE.category;
      PRODUCTS.filter(p => (cat === 'All' || p.category === cat) && (qv === '' || p.name.toLowerCase().includes(qv)))
        .forEach(p => {
          const card = document.createElement('div'); card.className = 'product';
          card.innerHTML = `<div class="img">Gambar</div><div class="title">${p.name}</div><div class="meta">${p.category}</div><div class="row" style="display:flex;justify-content:space-between;align-items:center;margin-top:6px"><div style="font-weight:700">${formatPrice(p.price)}</div><button class="addBtn" data-id="${p.id}" style="padding:8px 12px;border:none;border-radius:8px;background:#111827;color:#fff">Tambah</button></div>`;
          grid.appendChild(card);
        });
      grid.querySelectorAll('.addBtn').forEach(b => { b.addEventListener('click', ()=> addToCartById(+b.dataset.id)); });
    }
    function setupInteractions(){
      document.querySelectorAll('nav.cats button').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('nav.cats button').forEach(x=>x.classList.remove('active'));
          btn.classList.add('active'); STATE.category = btn.dataset.cat; renderAll();
        });
      });
      document.querySelectorAll('.catBtn').forEach(b => {
        b.addEventListener('click', () => {
          STATE.category = b.dataset.cat;
          document.querySelectorAll('nav.cats button').forEach(x=>{ x.classList.toggle('active', x.dataset.cat === STATE.category); });
          renderAll();
        });
      });
      el('searchInput').addEventListener('input', (e) => { STATE.query = e.target.value; renderAll(); });
      el('logoutBtn').addEventListener('click', () => { localStorage.removeItem('jualanku_user'); window.location.href = 'home.html'; });
      el('cartBtn').addEventListener('click', () => { alert('Lihat ringkasan keranjang di panel kanan. Tombol Checkout ada di bawah ringkasan.'); });
      el('promoBtn').addEventListener('click', () => { alert('Promo demo — diskon hingga 50%! (hanya mockup)'); });
      el('checkoutBtn').addEventListener('click', () => { if(STATE.cart.length === 0) { alert('Keranjang kosong.'); return; } alert('Checkout demo. Total: ' + money(totalCart())); });
    }
    function addToCartById(id){ const prod = PRODUCTS.find(p => p.id === id); if(!prod) return; addToCart(prod); }
    function addToCart(prod){ const found = STATE.cart.find(c => c.id === prod.id); if(found){ found.qty += 1; } else { STATE.cart.push({ id: prod.id, name: prod.name, price: prod.price, qty: 1 }); } saveCart(); renderCart(); updateCartCount(); }
    function updateQty(id, qty){ const idx = STATE.cart.findIndex(c => c.id === id); if(idx === -1) return; if(qty <= 0){ STATE.cart.splice(idx,1); } else { STATE.cart[idx].qty = qty; } saveCart(); renderCart(); updateCartCount(); }
    function removeFromCart(id){ STATE.cart = STATE.cart.filter(c => c.id !== id); saveCart(); renderCart(); updateCartCount(); }
    function saveCart(){ localStorage.setItem('jualanku_cart', JSON.stringify(STATE.cart)); }
    function totalCart(){ return STATE.cart.reduce((s,i)=>s + i.price * i.qty, 0); }
    function renderCart(){
      if(STATE.cart.length === 0){ el('cartEmpty').style.display = 'block'; el('cartList').style.display = 'none'; el('cartTotalWrap').style.display = 'none'; el('cartList').innerHTML = ''; }
      else {
        el('cartEmpty').style.display = 'none'; el('cartList').style.display = 'block'; el('cartTotalWrap').style.display = 'flex'; const wrap = el('cartList'); wrap.innerHTML = '';
        STATE.cart.forEach(item => {
          const row = document.createElement('div'); row.className = 'cart-item'; row.style.marginBottom = '10px';
          row.innerHTML = `<div style=\"width:44px;height:44px;background:#f3f4f6;border-radius:8px;display:flex;align-items:center;justify-content:center\">${item.name[0]}</div><div style=\"flex:1\"><div style=\"font-weight:700\">${item.name}</div><div style=\"font-size:13px;color:#6b7280\">${money(item.price)}</div><div style=\"margin-top:6px;display:flex;gap:6px;align-items:center\"><button class=\"btn-ghost small qtyBtn\" data-id=\"${item.id}\" data-act=\"dec\">-</button><div style=\"min-width:24px;text-align:center\">${item.qty}</div><button class=\"btn-ghost small qtyBtn\" data-id=\"${item.id}\" data-act=\"inc\">+</button></div></div><div style=\"text-align:right\"><div style=\"font-size:13px;color:#6b7280\">${money(item.price * item.qty)}</div><div style=\"margin-top:6px\"><button class=\"small\" style=\"color:#ef4444;border:none;background:transparent\" data-remove=\"${item.id}\">Hapus</button></div></div>`;
          wrap.appendChild(row);
        });
        wrap.querySelectorAll('.qtyBtn').forEach(b => { b.addEventListener('click', () => { const id = +b.dataset.id; if(b.dataset.act === 'dec') updateQty(id, (STATE.cart.find(x=>x.id===id).qty || 1) - 1); else updateQty(id, (STATE.cart.find(x=>x.id===id).qty || 0) + 1); }); });
        wrap.querySelectorAll('[data-remove]').forEach(b => { b.addEventListener('click', () => { const id = +b.getAttribute('data-remove'); removeFromCart(id); }); });
        el('cartTotal').innerText = money(totalCart());
      }
      updateCartCount();
    }
    function updateCartCount(){ el('cartCount').innerText = STATE.cart.reduce((s,i)=>s+i.qty,0); }
  </script>
</body>
</html>



